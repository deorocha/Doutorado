GeraÃ§Ã£o automÃ¡tica de SDK em ES6 para APIs do Ginga CCWS
Raphael Abreu
raphael.abreu@midiacom.uff.br
Laboratorio MÃ­diaCom
Universidade Federal Fluminense
NiterÃ³i, Brasil
Joel A. Ferreira dos Santos
jsantos@eic.cefet-rj.br
CEFET/RJ
Rio de Janeiro, Brasil
DÃ©bora C. Muchaluat-Saade
debora@midiacom.uff.br
Laboratorio MÃ­diaCom
Universidade Federal Fluminense
NiterÃ³i, Brasil
WTVDIâ€™2024, Juiz de Fora/MG, Brazil
Raphael Abreu, Joel A. Ferreira dos Santos, and DÃ©bora C. Muchaluat-Saade
AlÃ©m dos trabalhos acadÃªmicos, diversas iniciativas governamen-
tais tÃªm adotado o OpenAPI como padrÃ£o para a descriÃ§Ã£o de suas
APIs. No Brasil, o Portal Brasileiro de TransparÃªncia1 utiliza o Ope-
nAPI para documentar e disponibilizar seus serviÃ§os, facilitando o
acesso e a integraÃ§Ã£o com dados pÃºblicos.
A disponibilizaÃ§Ã£o de especificaÃ§Ãµes OpenAPI para serviÃ§os gov-
ernamentais e padrÃµes tecnolÃ³gicos, como a norma Ginga CCWS,
representa um passo importante para a comunidade de desenvolve-
dores. Essa prÃ¡tica promove a transparÃªncia, a interoperabilidade e a
inovaÃ§Ã£o, facilitando a criaÃ§Ã£o de aplicaÃ§Ãµes e serviÃ§os que utilizam
esses recursos. A geraÃ§Ã£o de SDKs a partir dessas especificaÃ§Ãµes,
como o SDK JavaScript apresentado neste trabalho, simplifica ainda
mais o processo de desenvolvimento, permitindo que os desenvolve-
dores se concentrem na lÃ³gica de suas aplicaÃ§Ãµes e contribuam para
um ecossistema mais rico e diversificado.
ESPECIFICAÃ‡ÃƒO OPENAPI DO GINGA
CCWS DA TV 2.5
Como primeira contribuiÃ§Ã£o deste trabalho foi feita uma especifi-
caÃ§Ã£o OpenAPI para a norma Ginga CCWS [2] da TV 2.5. Ela de-
screve os endpoints, mÃ©todos, parÃ¢metros, tipos de dados e respostas
esperadas da API. Ela serve como base para a geraÃ§Ã£o automÃ¡tica do
SDK e garante a interoperabilidade entre diferentes implementaÃ§Ãµes.
A especificaÃ§Ã£o estÃ¡ disponÃ­vel em formato YAML e pode ser visual-
izada em https://drive.google.com/file/d/1Bb0UV41ysQXhyEurePsOEaDl3VsvC_
Uc/view?usp=sharing testada utilizando ferramentas como o Swag-
ger Editor2.
O trecho de cÃ³digo na Figura 1 descreve um endpoint na API
Ginga CCWS: o /ğ‘‘ğ‘¡ğ‘£/ğ‘ğ‘¢ğ‘¡â„ğ‘œğ‘Ÿğ‘–ğ‘§ğ‘’, acessado via mÃ©todo GET. Ele serve
para solicitar o estado de autorizaÃ§Ã£o de um cliente, identificado pelo
parÃ¢metro obrigatÃ³rio ğ‘ğ‘™ğ‘–ğ‘’ğ‘›ğ‘¡ğ‘–ğ‘‘. Adicionalmente, o ğ‘‘ğ‘–ğ‘ ğ‘ğ‘™ğ‘ğ‘¦âˆ’ğ‘›ğ‘ğ‘šğ‘’
Ã© usado para apresentar o nome do cliente ao usuÃ¡rio durante o
processo de autorizaÃ§Ã£o. ParÃ¢metros opcionais como ğ‘ğ‘š, ğ‘˜ğ‘¥ğ‘e
ğ‘˜ğ‘’ğ‘¦permitem lidar com diferentes mÃ©todos de pareamento e segu-
ranÃ§a para clientes nÃ£o locais. A especificaÃ§Ã£o detalha as possÃ­veis
respostas, incluindo sucesso (cÃ³digo 200) com exemplos de dife-
rentes cenÃ¡rios de acesso, e erro â€œnÃ£o encontradoâ€ (cÃ³digo 404) com
referÃªncias a exemplos de erros especÃ­ficos.
De posse de uma da especificaÃ§Ã£o OpenAPI, Ã© possÃ­vel gerar
documentaÃ§Ã£o interativa e de fÃ¡cil navegaÃ§Ã£o, como a ilustrada
na Figura 2. Essa documentaÃ§Ã£o permite que desenvolvedores ex-
plorem os endpoints da API, seus parÃ¢metros e as respostas esper-
adas, facilitando a compreensÃ£o e o uso da API. Adicionalmente, a
especificaÃ§Ã£o OpenAPI pode ser utilizada para gerar automatica-
mente testes que validam o comportamento da API, garantindo sua
qualidade e confiabilidade.
Ao clicar em um endpoint especÃ­fico, Ã© possÃ­vel visualizar uma
descriÃ§Ã£o detalhada da rota, incluindo os parÃ¢metros necessÃ¡rios,
exemplos de requisiÃ§Ãµes e respostas, e atÃ© mesmo a possibilidade de
testar a rota diretamente na documentaÃ§Ã£o. O endpoint /ğ‘‘ğ‘¡ğ‘£/ğ‘ğ‘¢ğ‘¡â„ğ‘œğ‘Ÿğ‘–ğ‘§ğ‘’
pode ser visualizado na Figura 3 agilizando o processo de desen-
volvimento e integraÃ§Ã£o. Adicionalmente, a especificaÃ§Ã£o OpenAPI
pode ser utilizada para gerar automaticamente testes que validam o
comportamento da API, garantindo sua qualidade e confiabilidade.
1https://api.portaldatransparencia.gov.br
2https://editor.swagger.io/
Figure 1: Exemplo especificaÃ§Ã£o OpenAPI para a rota de au-
torizaÃ§Ã£o de clientes.
Figure 2: Exemplo de visualizaÃ§Ã£o de lista de APIs OpenAPI.
Ã‰ importante ressaltar que a especificaÃ§Ã£o OpenAPI permite a
flexibilidade na definiÃ§Ã£o do host da API. Ao utilizar o SDK, o de-
senvolvedor poderÃ¡ configurar o host da API de acordo com suas
GeraÃ§Ã£o automÃ¡tica de SDK em ES6 para APIs do Ginga CCWS
WTVDIâ€™2024, Juiz de Fora/MG, Brazil
Figure 3: Exemplo de visualizaÃ§Ã£o do endpoint /ğ‘‘ğ‘¡ğ‘£/ğ‘ğ‘¢ğ‘¡â„ğ‘œğ‘Ÿğ‘–ğ‘§ğ‘’
na interface grÃ¡fica.
necessidades, seja em um ambiente de desenvolvimento, homolo-
gaÃ§Ã£o ou produÃ§Ã£o. Essa flexibilidade Ã© fundamental para garantir
a adaptabilidade do SDK a diferentes cenÃ¡rios e infraestruturas.
GERADOR DE SDK CCWS
O gerador de SDK Ã© um script Node.js que utiliza a especificaÃ§Ã£o
OpenAPI do Ginga CCWS como entrada e gera automaticamente
o cÃ³digo JavaScript do SDK. Ele automatiza a criaÃ§Ã£o de mÃ©to-
dos para cada endpoint da API, simplificando o uso dos serviÃ§os
Ginga CCWS. O cÃ³digo do gerador realiza as seguintes etapas: lÃª
o arquivo JSON da especificaÃ§Ã£o OpenAPI da Ginga CCWS 2.5,
analisa-o para identificar os endpoints, mÃ©todos, parÃ¢metros e
respostas da API, gera o cÃ³digo JavaScript do SDK com um ob-
jeto API contendo mÃ©todos para cada endpoint, e salva o cÃ³digo
em um arquivo sdk.js. A classe FetchWrapper encapsula a lÃ³gica
de comunicaÃ§Ã£o HTTP usando a funÃ§Ã£o fetch do JavaScript. O
gerador de SDK encontra-se em https://drive.google.com/file/d/
1XpBi6iEQU3cQAWF5ZCnvIwX0jObSWojR/view?usp=sharing
4.1
Usando o SDK gerado
O SDK gerado oferece uma API onde cada endpoint Ã© representado
por um mÃ©todo com parÃ¢metros correspondentes Ã  especificaÃ§Ã£o
OpenAPI. A Listagem 1 demonstra um exemplo de uso, importando
o SDK e realizando uma chamada Ã  funÃ§Ã£o dtvAuthorizeGet. Note
que Ã© possÃ­vel customizar o host da API, caso necessÃ¡rio.
Listing 1: Exemplo de uso do SDK gerado
import API from
' . / sdk . js ' ;
API . host =
' < ip >: < porta > ' ;
/ /
opcional
await API . dtvAuthorizeGet ( {
c l i e n t i d :
' xpto ' ,
displayName :
' xpto ' ,
pm:
' qrcode '
} )
. then ( ( value ) => {
console . log ( value ) ;
} )
. catch ( e r r o r => {
console . log ( e r r o r ) ;
} ) ;
AlÃ©m disso, o gerador permite customizar a especificaÃ§Ã£o Ope-
nAPI antes da geraÃ§Ã£o do SDK, possibilitando a adaptaÃ§Ã£o da API
Ã s necessidades especÃ­ficas do projeto, adicionando ou removendo
funcionalidades conforme necessÃ¡rio.
CONCLUSÃƒO
Este artigo apresentou um gerador de SDK em JavaScript para a
norma Ginga CCWS. Foi criada a especificaÃ§Ã£o OpenAPI da norma
referente ao Ginga CCWS da TV 2.5 para usar como base do gerador.
O SDK gerado tem potencial de simplificar o desenvolvimento de
aplicaÃ§Ãµes interativas para a TV Digital, promovendo a interoper-
abilidade e a adaptabilidade a futuras versÃµes da norma.
A utilizaÃ§Ã£o do OpenAPI e do JavaScript permite que os desen-
volvedores aproveitem as vantagens de uma linguagem moderna
e amplamente utilizada, alÃ©m de garantir a aderÃªncia aos padrÃµes
da indÃºstria e a facilidade de integraÃ§Ã£o com outras ferramentas e
plataformas.
WTVDIâ€™2024, Juiz de Fora/MG, Brazil
Raphael Abreu, Joel A. Ferreira dos Santos, and DÃ©bora C. Muchaluat-Saade
Como trabalho futuro pretende-se expandir o gerador de SDK
para outras linguagens de programaÃ§Ã£o, como Python. AlÃ©m disso,
com a evoluÃ§Ã£o da norma Ginga para a TV 3.0, planeja-se atualizar
a especificaÃ§Ã£o OpenAPI e o gerador de SDK para suportar as novas
funcionalidades e serviÃ§os que serÃ£o introduzidos.
Por fim, um passo crucial serÃ¡ a realizaÃ§Ã£o de testes prÃ¡ticos do
SDK com desenvolvedores de aplicaÃ§Ãµes para a TV Digital, a fim
de coletar feedback sobre a usabilidade, a eficiÃªncia e a capacidade
do SDK de atender Ã s necessidades reais do desenvolvimento de
aplicaÃ§Ãµes Ginga.
